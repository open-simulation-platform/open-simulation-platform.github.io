<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.3"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>libcosim: cosim::persistent_file_cache Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">libcosim<span id="projectnumber">&#160;0.9.0</span>
   </div>
   <div id="projectbrief">C++ library for distributed co-simulation</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.3 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacecosim.html">cosim</a></li><li class="navelem"><a class="el" href="classcosim_1_1persistent__file__cache.html">persistent_file_cache</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classcosim_1_1persistent__file__cache-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">cosim::persistent_file_cache Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p>A persistent file cache which can be safely accessed by multiple processes and threads concurrently.  
 <a href="classcosim_1_1persistent__file__cache.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="file__cache_8hpp_source.html">cosim/file_cache.hpp</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for cosim::persistent_file_cache:</div>
<div class="dyncontent">
 <div class="center">
  <img src="classcosim_1_1persistent__file__cache.png" usemap="#cosim::persistent_5Ffile_5Fcache_map" alt=""/>
  <map id="cosim::persistent_5Ffile_5Fcache_map" name="cosim::persistent_5Ffile_5Fcache_map">
<area href="classcosim_1_1file__cache.html" title="An interface to a file cache." alt="cosim::file_cache" shape="rect" coords="0,0,170,24"/>
  </map>
</div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a61f4c06fd5e39daa9eb4843b456a3778"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcosim_1_1persistent__file__cache.html#a61f4c06fd5e39daa9eb4843b456a3778">persistent_file_cache</a> (const cosim::filesystem::path &amp;cacheRoot)</td></tr>
<tr class="memdesc:a61f4c06fd5e39daa9eb4843b456a3778"><td class="mdescLeft">&#160;</td><td class="mdescRight">Uses <code>cacheRoot</code> as the top-level directory of the cache.  <a href="classcosim_1_1persistent__file__cache.html#a61f4c06fd5e39daa9eb4843b456a3778">More...</a><br /></td></tr>
<tr class="separator:a61f4c06fd5e39daa9eb4843b456a3778"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a67e9a4f1c2d4b8a7808c73d2fe603930"><td class="memItemLeft" align="right" valign="top"><a id="a67e9a4f1c2d4b8a7808c73d2fe603930" name="a67e9a4f1c2d4b8a7808c73d2fe603930"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>persistent_file_cache</b> (const <a class="el" href="classcosim_1_1persistent__file__cache.html">persistent_file_cache</a> &amp;)=delete</td></tr>
<tr class="separator:a67e9a4f1c2d4b8a7808c73d2fe603930"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1e7405c5c78097c1608ac196fb9e67cd"><td class="memItemLeft" align="right" valign="top"><a id="a1e7405c5c78097c1608ac196fb9e67cd" name="a1e7405c5c78097c1608ac196fb9e67cd"></a>
<a class="el" href="classcosim_1_1persistent__file__cache.html">persistent_file_cache</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><b>operator=</b> (const <a class="el" href="classcosim_1_1persistent__file__cache.html">persistent_file_cache</a> &amp;)=delete</td></tr>
<tr class="separator:a1e7405c5c78097c1608ac196fb9e67cd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7f832f893ebfee967e648780a339623d"><td class="memItemLeft" align="right" valign="top"><a id="a7f832f893ebfee967e648780a339623d" name="a7f832f893ebfee967e648780a339623d"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>persistent_file_cache</b> (<a class="el" href="classcosim_1_1persistent__file__cache.html">persistent_file_cache</a> &amp;&amp;) noexcept</td></tr>
<tr class="separator:a7f832f893ebfee967e648780a339623d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a39ab580a335facde8eb67f8796d44405"><td class="memItemLeft" align="right" valign="top"><a id="a39ab580a335facde8eb67f8796d44405" name="a39ab580a335facde8eb67f8796d44405"></a>
<a class="el" href="classcosim_1_1persistent__file__cache.html">persistent_file_cache</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><b>operator=</b> (<a class="el" href="classcosim_1_1persistent__file__cache.html">persistent_file_cache</a> &amp;&amp;) noexcept</td></tr>
<tr class="separator:a39ab580a335facde8eb67f8796d44405"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa308ddc7dd4a72cd015145a855c11f87"><td class="memItemLeft" align="right" valign="top"><a class="elRef" href="http://en.cppreference.com/w/cpp/memory/unique_ptr.html">std::unique_ptr</a>&lt; <a class="el" href="classcosim_1_1file__cache_1_1directory__rw.html">directory_rw</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcosim_1_1persistent__file__cache.html#aa308ddc7dd4a72cd015145a855c11f87">get_directory_rw</a> (std::string_view key) override</td></tr>
<tr class="memdesc:aa308ddc7dd4a72cd015145a855c11f87"><td class="mdescLeft">&#160;</td><td class="mdescRight">Requests read/write access to the cache subdirectory associated with the given key, creating one if it doesn't exist already.  <a href="classcosim_1_1persistent__file__cache.html#aa308ddc7dd4a72cd015145a855c11f87">More...</a><br /></td></tr>
<tr class="separator:aa308ddc7dd4a72cd015145a855c11f87"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a60d63fe92ccdd599af99804fc87da66f"><td class="memItemLeft" align="right" valign="top"><a class="elRef" href="http://en.cppreference.com/w/cpp/memory/unique_ptr.html">std::unique_ptr</a>&lt; <a class="el" href="classcosim_1_1file__cache_1_1directory__ro.html">directory_ro</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcosim_1_1persistent__file__cache.html#a60d63fe92ccdd599af99804fc87da66f">get_directory_ro</a> (std::string_view key) override</td></tr>
<tr class="memdesc:a60d63fe92ccdd599af99804fc87da66f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Requests read-only access to the cache subdirectory associated with the given key.  <a href="classcosim_1_1persistent__file__cache.html#a60d63fe92ccdd599af99804fc87da66f">More...</a><br /></td></tr>
<tr class="separator:a60d63fe92ccdd599af99804fc87da66f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acc7f70864d621bf7b0d7799d63b41990"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcosim_1_1persistent__file__cache.html#acc7f70864d621bf7b0d7799d63b41990">cleanup</a> ()</td></tr>
<tr class="memdesc:acc7f70864d621bf7b0d7799d63b41990"><td class="mdescLeft">&#160;</td><td class="mdescRight">Cleans up cache contents.  <a href="classcosim_1_1persistent__file__cache.html#acc7f70864d621bf7b0d7799d63b41990">More...</a><br /></td></tr>
<tr class="separator:acc7f70864d621bf7b0d7799d63b41990"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a01203d8d1e7ad0e3ed6638713b2f5f83"><td class="memItemLeft" align="right" valign="top">virtual <a class="elRef" href="http://en.cppreference.com/w/cpp/memory/unique_ptr.html">std::unique_ptr</a>&lt; <a class="el" href="classcosim_1_1file__cache_1_1directory__rw.html">directory_rw</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcosim_1_1file__cache.html#a01203d8d1e7ad0e3ed6638713b2f5f83">get_directory_rw</a> (std::string_view key)=0</td></tr>
<tr class="memdesc:a01203d8d1e7ad0e3ed6638713b2f5f83"><td class="mdescLeft">&#160;</td><td class="mdescRight">Requests read/write access to the cache subdirectory associated with the given key, creating one if it doesn't exist already.  <a href="classcosim_1_1file__cache.html#a01203d8d1e7ad0e3ed6638713b2f5f83">More...</a><br /></td></tr>
<tr class="separator:a01203d8d1e7ad0e3ed6638713b2f5f83"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a09bbbd1dcc4f4eb37d6d6ac587299fc3"><td class="memItemLeft" align="right" valign="top">virtual <a class="elRef" href="http://en.cppreference.com/w/cpp/memory/unique_ptr.html">std::unique_ptr</a>&lt; <a class="el" href="classcosim_1_1file__cache_1_1directory__ro.html">directory_ro</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcosim_1_1file__cache.html#a09bbbd1dcc4f4eb37d6d6ac587299fc3">get_directory_ro</a> (std::string_view key)=0</td></tr>
<tr class="memdesc:a09bbbd1dcc4f4eb37d6d6ac587299fc3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Requests read-only access to the cache subdirectory associated with the given key.  <a href="classcosim_1_1file__cache.html#a09bbbd1dcc4f4eb37d6d6ac587299fc3">More...</a><br /></td></tr>
<tr class="separator:a09bbbd1dcc4f4eb37d6d6ac587299fc3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p >A persistent file cache which can be safely accessed by multiple processes and threads concurrently. </p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a61f4c06fd5e39daa9eb4843b456a3778" name="a61f4c06fd5e39daa9eb4843b456a3778"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a61f4c06fd5e39daa9eb4843b456a3778">&#9670;&nbsp;</a></span>persistent_file_cache()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">cosim::persistent_file_cache::persistent_file_cache </td>
          <td>(</td>
          <td class="paramtype">const cosim::filesystem::path &amp;&#160;</td>
          <td class="paramname"><em>cacheRoot</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">explicit</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Uses <code>cacheRoot</code> as the top-level directory of the cache. </p>
<p >It is recommended that this directory be managed in its entirety by <code><a class="el" href="classcosim_1_1persistent__file__cache.html" title="A persistent file cache which can be safely accessed by multiple processes and threads concurrently.">persistent_file_cache</a></code>, i.e., that no other files are stored in it. </p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="acc7f70864d621bf7b0d7799d63b41990" name="acc7f70864d621bf7b0d7799d63b41990"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acc7f70864d621bf7b0d7799d63b41990">&#9670;&nbsp;</a></span>cleanup()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void cosim::persistent_file_cache::cleanup </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Cleans up cache contents. </p>
<p >This will delete all subdirectories that are not currently being used (i.e., for which there exist <code>directory_r[ow]</code> handles). </p>

</div>
</div>
<a id="a60d63fe92ccdd599af99804fc87da66f" name="a60d63fe92ccdd599af99804fc87da66f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a60d63fe92ccdd599af99804fc87da66f">&#9670;&nbsp;</a></span>get_directory_ro()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="elRef" href="http://en.cppreference.com/w/cpp/memory/unique_ptr.html">std::unique_ptr</a>&lt; <a class="el" href="classcosim_1_1file__cache_1_1directory__ro.html">directory_ro</a> &gt; cosim::persistent_file_cache::get_directory_ro </td>
          <td>(</td>
          <td class="paramtype">std::string_view&#160;</td>
          <td class="paramname"><em>key</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Requests read-only access to the cache subdirectory associated with the given key. </p>
<p >The key must already exist in the cache.</p>
<p >Access is granted for the lifetime of the returned <code>directory_ro</code> object. The object should therefore be kept around as long as access is needed, but usually no longer, since it may block others from gaining access. Once the object expires, the directory may be modified or deleted by others.</p>
<p >If the function is unable to take shared ownership of the directory, it may block until it becomes able to do so, or it may throw. </p>

<p>Implements <a class="el" href="classcosim_1_1file__cache.html#a09bbbd1dcc4f4eb37d6d6ac587299fc3">cosim::file_cache</a>.</p>

</div>
</div>
<a id="aa308ddc7dd4a72cd015145a855c11f87" name="aa308ddc7dd4a72cd015145a855c11f87"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa308ddc7dd4a72cd015145a855c11f87">&#9670;&nbsp;</a></span>get_directory_rw()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="elRef" href="http://en.cppreference.com/w/cpp/memory/unique_ptr.html">std::unique_ptr</a>&lt; <a class="el" href="classcosim_1_1file__cache_1_1directory__rw.html">directory_rw</a> &gt; cosim::persistent_file_cache::get_directory_rw </td>
          <td>(</td>
          <td class="paramtype">std::string_view&#160;</td>
          <td class="paramname"><em>key</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Requests read/write access to the cache subdirectory associated with the given key, creating one if it doesn't exist already. </p>
<p >Access is granted for the lifetime of the returned <code>directory_rw</code> object. The object should therefore be kept around as long as access is needed, but usually no longer, since it may block others from gaining access. Once the object expires, the directory may be modified or deleted by others.</p>
<p >If the function is unable to take ownership of the directory, it may block until it becomes able to do so, or it may throw. </p>

<p>Implements <a class="el" href="classcosim_1_1file__cache.html#a01203d8d1e7ad0e3ed6638713b2f5f83">cosim::file_cache</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>cosim/<a class="el" href="file__cache_8hpp_source.html">file_cache.hpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.3
</small></address>
</body>
</html>
