<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>CSE core: cse::fmi::importer Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">CSE core
   &#160;<span id="projectnumber">0.6.0</span>
   </div>
   <div id="projectbrief">C/C++ library for distributed co-simulation</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacecse.html">cse</a></li><li class="navelem"><b>fmi</b></li><li class="navelem"><a class="el" href="classcse_1_1fmi_1_1importer.html">importer</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="classcse_1_1fmi_1_1importer-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">cse::fmi::importer Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Imports and caches FMUs.  
 <a href="classcse_1_1fmi_1_1importer.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="importer_8hpp_source.html">cse/fmi/importer.hpp</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for cse::fmi::importer:</div>
<div class="dyncontent">
 <div class="center">
  <img src="classcse_1_1fmi_1_1importer.png" usemap="#cse::fmi::importer_map" alt=""/>
  <map id="cse::fmi::importer_map" name="cse::fmi::importer_map">
<area href="http://en.cppreference.com/w/cpp/memory/enable_shared_from_this.html" alt="std::enable_shared_from_this&lt; importer &gt;" shape="rect" coords="0,0,246,24"/>
  </map>
</div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a3acc0261bc34eeb805d623e74286ad2c"><td class="memItemLeft" align="right" valign="top"><a class="elRef" href="http://en.cppreference.com/w/cpp/memory/shared_ptr.html">std::shared_ptr</a>&lt; <a class="el" href="classcse_1_1fmi_1_1fmu.html">fmu</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcse_1_1fmi_1_1importer.html#a3acc0261bc34eeb805d623e74286ad2c">import</a> (const boost::filesystem::path &amp;fmuPath)</td></tr>
<tr class="memdesc:a3acc0261bc34eeb805d623e74286ad2c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Imports and loads an FMU.  <a href="classcse_1_1fmi_1_1importer.html#a3acc0261bc34eeb805d623e74286ad2c">More...</a><br /></td></tr>
<tr class="separator:a3acc0261bc34eeb805d623e74286ad2c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae281738a372ad980ca68aca4bb010805"><td class="memItemLeft" align="right" valign="top"><a class="elRef" href="http://en.cppreference.com/w/cpp/memory/shared_ptr.html">std::shared_ptr</a>&lt; <a class="el" href="classcse_1_1fmi_1_1fmu.html">fmu</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcse_1_1fmi_1_1importer.html#ae281738a372ad980ca68aca4bb010805">import_unpacked</a> (const boost::filesystem::path &amp;unpackedFMUPath)</td></tr>
<tr class="memdesc:ae281738a372ad980ca68aca4bb010805"><td class="mdescLeft">&#160;</td><td class="mdescRight">Imports and loads an FMU that has already been unpacked.  <a href="classcse_1_1fmi_1_1importer.html#ae281738a372ad980ca68aca4bb010805">More...</a><br /></td></tr>
<tr class="separator:ae281738a372ad980ca68aca4bb010805"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a18edc6937b8fcc6e0478dec54c03cba1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcse_1_1fmi_1_1importer.html#a18edc6937b8fcc6e0478dec54c03cba1">clean_cache</a> ()</td></tr>
<tr class="memdesc:a18edc6937b8fcc6e0478dec54c03cba1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Removes unused files and directories from the FMU cache.  <a href="classcse_1_1fmi_1_1importer.html#a18edc6937b8fcc6e0478dec54c03cba1">More...</a><br /></td></tr>
<tr class="separator:a18edc6937b8fcc6e0478dec54c03cba1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab4be9f19c2b8ef7833793d4633659468"><td class="memItemLeft" align="right" valign="top"><a id="ab4be9f19c2b8ef7833793d4633659468"></a>
<a class="elRef" href="http://en.cppreference.com/w/cpp/string/basic_string.html">std::string</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcse_1_1fmi_1_1importer.html#ab4be9f19c2b8ef7833793d4633659468">last_error_message</a> ()</td></tr>
<tr class="memdesc:ab4be9f19c2b8ef7833793d4633659468"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the last FMI Library error message. <br /></td></tr>
<tr class="separator:ab4be9f19c2b8ef7833793d4633659468"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3d28b1ea9b0dd775180a3e5e460a6032"><td class="memItemLeft" align="right" valign="top"><a id="a3d28b1ea9b0dd775180a3e5e460a6032"></a>
fmi_import_context_t *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcse_1_1fmi_1_1importer.html#a3d28b1ea9b0dd775180a3e5e460a6032">fmilib_handle</a> () const</td></tr>
<tr class="memdesc:a3d28b1ea9b0dd775180a3e5e460a6032"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns a pointer to the underlying FMI Library import context. <br /></td></tr>
<tr class="separator:a3d28b1ea9b0dd775180a3e5e460a6032"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_enable_shared_from_this"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_enable_shared_from_this')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el"  href="http://en.cppreference.com/w/cpp/memory/enable_shared_from_this.html">std::enable_shared_from_this&lt; importer &gt;</a></td></tr>
<tr class="memitem: inherit pub_methods_enable_shared_from_this"><td class="memItemLeft" align="right" valign="top"><a id=""></a>
T&#160;</td><td class="memItemRight" valign="bottom"><a class="elRef" href="http://en.cppreference.com/w/cpp/memory/enable_shared_from_this/enable_shared_from_this.html">enable_shared_from_this</a> (T... args)</td></tr>
<tr class="separator: inherit pub_methods_enable_shared_from_this"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem: inherit pub_methods_enable_shared_from_this"><td class="memItemLeft" align="right" valign="top"><a id=""></a>
T&#160;</td><td class="memItemRight" valign="bottom"><a class="elRef" href="http://en.cppreference.com/w/cpp/memory/enable_shared_from_this/operator=.html">operator=</a> (T... args)</td></tr>
<tr class="separator: inherit pub_methods_enable_shared_from_this"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem: inherit pub_methods_enable_shared_from_this"><td class="memItemLeft" align="right" valign="top"><a id=""></a>
T&#160;</td><td class="memItemRight" valign="bottom"><a class="elRef" href="http://en.cppreference.com/w/cpp/memory/enable_shared_from_this/shared_from_this.html">shared_from_this</a> (T... args)</td></tr>
<tr class="separator: inherit pub_methods_enable_shared_from_this"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem: inherit pub_methods_enable_shared_from_this"><td class="memItemLeft" align="right" valign="top"><a id=""></a>
T&#160;</td><td class="memItemRight" valign="bottom"><a class="elRef" href="http://en.cppreference.com/w/cpp/memory/enable_shared_from_this/~enable_shared_from_this.html">~enable_shared_from_this</a> (T... args)</td></tr>
<tr class="separator: inherit pub_methods_enable_shared_from_this"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:ac2903dbede443ae33391373386431961"><td class="memItemLeft" align="right" valign="top">static <a class="elRef" href="http://en.cppreference.com/w/cpp/memory/shared_ptr.html">std::shared_ptr</a>&lt; <a class="el" href="classcse_1_1fmi_1_1importer.html">importer</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcse_1_1fmi_1_1importer.html#ac2903dbede443ae33391373386431961">create</a> (const boost::filesystem::path &amp;cachePath)</td></tr>
<tr class="memdesc:ac2903dbede443ae33391373386431961"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates a new FMU importer that uses a specific cache directory.  <a href="classcse_1_1fmi_1_1importer.html#ac2903dbede443ae33391373386431961">More...</a><br /></td></tr>
<tr class="separator:ac2903dbede443ae33391373386431961"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abefcd4ed1272b29308a5067e7d16e374"><td class="memItemLeft" align="right" valign="top">static <a class="elRef" href="http://en.cppreference.com/w/cpp/memory/shared_ptr.html">std::shared_ptr</a>&lt; <a class="el" href="classcse_1_1fmi_1_1importer.html">importer</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcse_1_1fmi_1_1importer.html#abefcd4ed1272b29308a5067e7d16e374">create</a> ()</td></tr>
<tr class="memdesc:abefcd4ed1272b29308a5067e7d16e374"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates a new FMU importer that uses a temporary cache directory.  <a href="classcse_1_1fmi_1_1importer.html#abefcd4ed1272b29308a5067e7d16e374">More...</a><br /></td></tr>
<tr class="separator:abefcd4ed1272b29308a5067e7d16e374"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Imports and caches FMUs. </p>
<p>The main purpose of this class is to read FMU files and create <code><a class="el" href="classcse_1_1fmi_1_1fmu.html" title="An interface for classes that represent imported FMUs.">cse::fmi::fmu</a></code> objects to represent them. This is done with the <code><a class="el" href="classcse_1_1fmi_1_1importer.html#a3acc0261bc34eeb805d623e74286ad2c" title="Imports and loads an FMU.">import()</a></code> function.</p>
<p>An <code>importer</code> object uses an on-disk cache that holds the unpacked contents of previously imported FMUs, so that they don't need to be unpacked anew every time they are imported. This is a huge time-saver when large and/or many FMUs are loaded. The path to this cache may be supplied by the user, in which case it is not automatically emptied on destruction. Thus, if the same path is supplied each time, the cache becomes persistent between program runs. It may be cleared manually by calling <code><a class="el" href="classcse_1_1fmi_1_1importer.html#a18edc6937b8fcc6e0478dec54c03cba1" title="Removes unused files and directories from the FMU cache.">clean_cache()</a></code>.</p>
<dl class="section warning"><dt>Warning</dt><dd>Currently, there are no synchronisation mechanisms to protect the cache from concurrent use, so accessing the same cache from multiple instances/processes will likely cause problems. </dd></dl>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="a18edc6937b8fcc6e0478dec54c03cba1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a18edc6937b8fcc6e0478dec54c03cba1">&#9670;&nbsp;</a></span>clean_cache()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void cse::fmi::importer::clean_cache </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Removes unused files and directories from the FMU cache. </p>
<p>This will remove all FMU contents from the cache, except the ones for which there currently exist FMU objects. </p>

</div>
</div>
<a id="abefcd4ed1272b29308a5067e7d16e374"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abefcd4ed1272b29308a5067e7d16e374">&#9670;&nbsp;</a></span>create() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="elRef" href="http://en.cppreference.com/w/cpp/memory/shared_ptr.html">std::shared_ptr</a>&lt;<a class="el" href="classcse_1_1fmi_1_1importer.html">importer</a>&gt; cse::fmi::importer::create </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Creates a new FMU importer that uses a temporary cache directory. </p>
<p>A new cache directory will be created in a location suitable for temporary files under the conventions of the operating system. It will be completely removed again on destruction. </p>

</div>
</div>
<a id="ac2903dbede443ae33391373386431961"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac2903dbede443ae33391373386431961">&#9670;&nbsp;</a></span>create() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="elRef" href="http://en.cppreference.com/w/cpp/memory/shared_ptr.html">std::shared_ptr</a>&lt;<a class="el" href="classcse_1_1fmi_1_1importer.html">importer</a>&gt; cse::fmi::importer::create </td>
          <td>(</td>
          <td class="paramtype">const boost::filesystem::path &amp;&#160;</td>
          <td class="paramname"><em>cachePath</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Creates a new FMU importer that uses a specific cache directory. </p>
<p>The cache directory will not be removed or emptied on destruction.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">cachePath</td><td>The path to the directory which will hold the FMU cache. If it does not exist already, it will be created. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a3acc0261bc34eeb805d623e74286ad2c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3acc0261bc34eeb805d623e74286ad2c">&#9670;&nbsp;</a></span>import()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="elRef" href="http://en.cppreference.com/w/cpp/memory/shared_ptr.html">std::shared_ptr</a>&lt;<a class="el" href="classcse_1_1fmi_1_1fmu.html">fmu</a>&gt; cse::fmi::importer::import </td>
          <td>(</td>
          <td class="paramtype">const boost::filesystem::path &amp;&#160;</td>
          <td class="paramname"><em>fmuPath</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Imports and loads an FMU. </p>
<p>Loaded FMUs are managed using reference counting. If an FMU is loaded, and then the same FMU is loaded again before the first one has been destroyed, the second call will return a reference to the first one. (Two FMUs are deemed to be the same if they have the same path <em>or</em> the same GUID.)</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">fmuPath</td><td>The path to the FMU file. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>An object which represents the imported FMU. </dd></dl>

</div>
</div>
<a id="ae281738a372ad980ca68aca4bb010805"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae281738a372ad980ca68aca4bb010805">&#9670;&nbsp;</a></span>import_unpacked()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="elRef" href="http://en.cppreference.com/w/cpp/memory/shared_ptr.html">std::shared_ptr</a>&lt;<a class="el" href="classcse_1_1fmi_1_1fmu.html">fmu</a>&gt; cse::fmi::importer::import_unpacked </td>
          <td>(</td>
          <td class="paramtype">const boost::filesystem::path &amp;&#160;</td>
          <td class="paramname"><em>unpackedFMUPath</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Imports and loads an FMU that has already been unpacked. </p>
<p>This is more or less equivalent to <code><a class="el" href="classcse_1_1fmi_1_1importer.html#a3acc0261bc34eeb805d623e74286ad2c" title="Imports and loads an FMU.">import()</a></code>, but since the FMU is already unpacked its contents will be read from the specified directory rather than the cache.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">unpackedFMUPath</td><td>The path to a directory that holds the unpacked contents of an FMU. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>An object which represents the imported FMU. </dd></dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>cse/fmi/<a class="el" href="importer_8hpp_source.html">importer.hpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
