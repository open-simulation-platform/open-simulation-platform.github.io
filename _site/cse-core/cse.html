<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <title>CSE - Core Simulation Environment</title> <link rel="shortcut icon" href="http://localhost:4000/favicon.ico" type="image/x-icon"> <link rel="stylesheet" href="http://localhost:4000/assets/css/just-the-docs.css"> <script type="text/javascript" src="http://localhost:4000/assets/js/vendor/lunr.min.js"></script> <script type="text/javascript" src="http://localhost:4000/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.6.1 --> <title>CSE | Core Simulation Environment</title> <meta name="generator" content="Jekyll v3.8.5" /> <meta property="og:title" content="CSE" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="co-simulation software" /> <meta property="og:description" content="co-simulation software" /> <link rel="canonical" href="http://localhost:4000/cse-core/cse" /> <meta property="og:url" content="http://localhost:4000/cse-core/cse" /> <meta property="og:site_name" content="Core Simulation Environment" /> <script type="application/ld+json"> {"@type":"WebPage","headline":"CSE","url":"http://localhost:4000/cse-core/cse","description":"co-simulation software","@context":"https://schema.org"}</script> <!-- End Jekyll SEO tag --> </head> <body> <svg xmlns="http://www.w3.org/2000/svg" style="display: none;"> <symbol id="link" viewBox="0 0 16 16"> <title>Link</title> <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path> </symbol> </svg> <div class="page-wrap"> <div class="side-bar"> <div class="site-header"> <a href="http://localhost:4000" class="site-title lh-tight"> Core Simulation Environment </a> <button class="menu-button fs-3 js-main-nav-trigger" data-text-toggle="Hide" type="button">Menu</button> </div> <div class="navigation main-nav js-main-nav"> <nav role="navigation" aria-label="Main navigation"> <ul class="navigation-list"><li class="navigation-list-item"><a href="http://localhost:4000/404.html" class="navigation-list-link">page not found</a></li><li class="navigation-list-item"><a href="http://localhost:4000/cse-demo-app/DPShip" class="navigation-list-link">DPShip</a></li><li class="navigation-list-item"><a href="http://localhost:4000/cse-demo-app/House" class="navigation-list-link">House</a></li><li class="navigation-list-item"><a href="http://localhost:4000/cse-demo-app/Quarter-Truck" class="navigation-list-link">Quarter-Truck</a></li><li class="navigation-list-item"><a href="http://localhost:4000/cse-cli" class="navigation-list-link">cse-cli</a></li><li class="navigation-list-item active"><a href="http://localhost:4000/cse-core/cse" class="navigation-list-link active">CSE</a></li><li class="navigation-list-item"><a href="http://localhost:4000/cse-demo-app/cse-demo-app" class="navigation-list-link">cse-demo-app</a></li><li class="navigation-list-item"><a href="http://localhost:4000/cse-java-wrapper" class="navigation-list-link">cse-java-wrapper</a></li><li class="navigation-list-item"><a href="http://localhost:4000/cse-core/fmuproxy" class="navigation-list-link">fmuproxy</a></li><li class="navigation-list-item"><a href="http://localhost:4000/" class="navigation-list-link">CSE</a></li><li class="navigation-list-item"><a href="http://localhost:4000/model-interface-validator" class="navigation-list-link">Model Interface Validator</a></li><li class="navigation-list-item"><a href="http://localhost:4000/cse-demo-app/user-guide" class="navigation-list-link">user-guide</a></li></ul> </nav> </div> <footer class="site-footer"> <p class="text-small text-grey-dk-000 mb-4">This site uses <a href="https://github.com/pmarsceill/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll.</p> </footer> </div> <div class="main-content-wrap js-main-content" tabindex="0"> <div class="main-content"> <div class="page-header js-page-header"> <div class="search"> <div class="search-input-wrap"> <input type="text" class="js-search-input search-input" tabindex="0" placeholder="Search Core Simulation Environment" aria-label="Search Core Simulation Environment" autocomplete="off"> <svg width="14" height="14" viewBox="0 0 28 28" xmlns="http://www.w3.org/2000/svg" class="search-icon"><title>Search</title><g fill-rule="nonzero"><path d="M17.332 20.735c-5.537 0-10-4.6-10-10.247 0-5.646 4.463-10.247 10-10.247 5.536 0 10 4.601 10 10.247s-4.464 10.247-10 10.247zm0-4c3.3 0 6-2.783 6-6.247 0-3.463-2.7-6.247-6-6.247s-6 2.784-6 6.247c0 3.464 2.7 6.247 6 6.247z"/><path d="M11.672 13.791L.192 25.271 3.02 28.1 14.5 16.62z"/></g></svg> </div> <div class="js-search-results search-results-wrap"></div> </div> </div> <div class="page"> <div id="main-content" class="page-content" role="main"> <h2 id="cse-core"> <a href="#cse-core" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> CSE-core </h2> <p>The C/C++ co-simulation library orchestrates the co-simulation of models that conform to the Functional Mock-up Interface (FMI) . The co-simulation library includes a fixed-step master algorithm with a configurable base step size. It allows for individually defined time steps for the models, with the requirement of being a multiple of the master algorithm base step size. During simulation, there are features to observe and manipulate simulation variables either through dedicated interfaces or with a scenario runner. It is possible to apply arbitrary operations to variable values without modifying the subsystem models themselves. Examples include arithmetics, logical operations, transformations, unit conversions and more. This is necessity if variables connected between models must be summed or transformed by linear transformation or between coordinate frames. There are interfaces for client applications to include their own implementation of many of the included features.</p> <p>The main concepts of CSE interfaces are shown in the figure below. Detailed descriptions can be found via <a href="./doxygen/0.6.0" target="_blank">C/C++ co-simulation library</a>.</p> <figure> <img src="/assets/img/cseFig2.png" width="800" /> </figure> <h3 id="configuration"> <a href="#configuration" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> Configuration </h3> <p>The configuration format is based on the <a href="">MSMI standard</a> and is used to configure the simulation system structure, including connections between FMUs and setting of initial values for input and parameter variables. The configuration format is XML according to schema <a href="">OspSystemStructure.xsd</a>. Connections can be configured as variables and variableGroups.</p> <p>Co-simulation configuration using the <a href="https://ssp-standard.org/">SSP standard</a> is also partially supported.</p> <h3 id="scenario"> <a href="#scenario" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> Scenario </h3> <p>A scenario file defines the simulation scenario which shall be performed. This serves for dynamic systems where actions to be made to trigger any event, activate models or sending signals to the controllers, etc. The example below shows the syntax structure of a scenario file. First is the <code class="language-plaintext highlighter-rouge">"description"</code> of what does this scenario do. <code class="language-plaintext highlighter-rouge">"action"</code> declares the action type which can be <code class="language-plaintext highlighter-rouge">"override"</code> , <code class="language-plaintext highlighter-rouge">"bias"</code> or <code class="language-plaintext highlighter-rouge">"reset"</code>. <code class="language-plaintext highlighter-rouge">"events"</code> includes the <code class="language-plaintext highlighter-rouge">"time"</code> in second when the action takes place, on which <code class="language-plaintext highlighter-rouge">"model"</code>, the “<code class="language-plaintext highlighter-rouge">variable"</code> name in this model and the <code class="language-plaintext highlighter-rouge">"value"</code> for this variable (except for <code class="language-plaintext highlighter-rouge">"reset"</code> action type which doesn’t require a value) .</p> <div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w"> </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"description of the scnario"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"defaults"</span><span class="p">:</span><span class="w"> 
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"model"</span><span class="p">:</span><span class="w"> </span><span class="s2">"model name"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"action"</span><span class="p">:</span><span class="w"> </span><span class="s2">"override"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"events"</span><span class="p">:</span><span class="w"> 
  </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"time"</span><span class="p">:</span><span class="w"> </span><span class="err">event</span><span class="w"> </span><span class="err">time</span><span class="p">,</span><span class="w">
      </span><span class="nl">"variable"</span><span class="p">:</span><span class="w"> </span><span class="s2">"variable name"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="err">variable</span><span class="w"> </span><span class="err">value</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="err">...</span><span class="w">      </span><span class="err">event</span><span class="w"> </span><span class="mi">2</span><span class="w">       </span><span class="err">...</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="err">...</span><span class="w">      </span><span class="err">event</span><span class="w"> </span><span class="mi">3</span><span class="w">       </span><span class="err">...</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nl">"end"</span><span class="p">:</span><span class="w"> </span><span class="err">scenario</span><span class="w"> </span><span class="err">stop</span><span class="w"> </span><span class="err">time</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div> <h3 id="results-logging"> <a href="#results-logging" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> Results logging </h3> <p>In order to log signal values from a simulation to data files, an output directory must be specified in the result folder field on the simulation setup. By default, all signals will be logged and persisted on every sample. There will be one file generated pr. simulator. This can quickly lead to a large amount of data being generated, so it is recommended instead specifying what signals to log using the configurable log format outlined below. CSE supports basic configuration of specific signals to log from any simulator via an XML file. This file must be named “LogConfig.xml” (exactly including case) and placed in the same folder as the simulators.</p> <div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;simulators&gt;</span>
    <span class="nt">&lt;simulator</span> <span class="na">name=</span><span class="s">"model name 1"</span> <span class="na">decimationFactor=</span><span class="s">"20"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;variable</span> <span class="na">name=</span><span class="s">"variable name 1"</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;variable</span> <span class="na">name=</span><span class="s">"variable name 2"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/simulator&gt;</span>
    <span class="nt">&lt;simulator</span> <span class="na">name=</span><span class="s">"model name 1"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;variable</span> <span class="na">name=</span><span class="s">"variable name 1"</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;variable</span> <span class="na">name=</span><span class="s">"variable name 2"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/simulator&gt;</span>
<span class="nt">&lt;/simulators&gt;</span>
</code></pre></div></div> <p>The simulators to be logged must be enclosed in a <code class="language-plaintext highlighter-rouge">&lt;simulators&gt;</code> tag, and each signal must specify its name in separate <code class="language-plaintext highlighter-rouge">&lt;variable&gt;</code> tags under each <code class="language-plaintext highlighter-rouge">&lt;simulator&gt;</code>. Leaving out any <code class="language-plaintext highlighter-rouge">&lt;variable&gt;</code> tags on a <code class="language-plaintext highlighter-rouge">&lt;simulator&gt;</code> will lead to all variables for that simulator being logged. Each simulator has an optional attribute decimationFactor that specifies that simulator’s decimation factor when logging variables. For example a decimation factor of 20 will lead to every 20th sample being logged. If this is not specified, every sample will be logged. Leaving out a simulator from the configuration will disable logging for that simulator. The log is written in CSV format only, there is currently no support for binary or other log formats.</p> <h3 id="distributed-co-simulation"> <a href="#distributed-co-simulation" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> Distributed co-simulation </h3> <p>Distributed simulation using fmu-proxy allows you to:</p> <ol> <li>Run multiple instances of a model even though the FMU only allows it to be instantiated once.</li> <li>Run FMUs that are not compatible with your OS or bitness.</li> <li>Parallelize the workload onto multiple computation nodes.</li> </ol> <p>Distributed simulation is currently enabled through integration with the software FMU Proxy. Both FMI 1.0 and FMI 2.0 for Co-simulation is supported.</p> <p>FMU-proxy is a framework for accessing FMUs compatible with FMI for Co-simulation and Model Exchange 2.0 in a language and platform independent way. This is achieved using well established RPC technologies. Due to the technologies involved, clients and servers for FMU-proxy can be written in almost any language, on any platform!</p> <p>Server implementations already exists for C++ and JVM, while client implementations exists for C++, JVM, Python and (browser) JavaScript. And its easy to add additional implementations, as the RPC frameworks will generate most of the code for you!</p> <p>FMU-proxy is different from other framework for distributed FMU invocations such as DACCOSIM, FMI GO! and Coral in that it completely separates itself from the master algorithm (logically and physically). FMU-proxy is a completely standalone project which provides access to FMUs over the wire. And just that.</p> <p>The idea is that other applications should use FMU-proxy whenever FMUs are required to run distributed, rather than having each application creating their own solution.</p> <p><a href="https://github.com/NTNU-IHB/FMU-proxy">Using fmu-proxy with CSE</a></p> </div> </div> </div> </div> </body> </html>
